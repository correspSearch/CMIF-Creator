webpackJsonp([1],{"1/oy":function(e,t){},"8Mze":function(e,t,r){"use strict";function s(e){r("pYvg")}var a=r("gDWM"),i=r("9huz"),n=r("VU/8"),l=s,o=n(a.a,i.a,!1,l,null,null);t.a=o.exports},"9M+g":function(e,t){},"9huz":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"start"},[r("b-container",[r("b-row",[r("b-col",[r("h3",[e._v(e._s(e.label.head1))]),e._v("\n        "+e._s(e.label.startDesc)+"\n      ")])],1),e._v(" "),r("b-row",[r("b-col",[r("b-alert",{staticClass:"mt-2",attrs:{variant:"danger",show:e.error}},[e._v(e._s(e.errorMsg))])],1)],1),e._v(" "),r("b-row",{staticClass:"mt-2"},[r("b-col",[r("h4",[e._v(e._s(e.label.startNew))]),e._v(" "),this.$parent.metaData.title?e._e():r("b-button",{staticClass:"btn-block",on:{click:function(t){e.startNew(),e.$parent.nav="meta"}}},[e._v(e._s(e.label.start))]),e._v(" "),this.$parent.metaData.title?r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalStartNew",modifiers:{modalStartNew:!0}}],staticClass:"btn-block"},[e._v(e._s(e.label.start))]):e._e(),e._v(" "),this.$parent.metaData.title?r("b-modal",{ref:"modal",attrs:{id:"modalStartNew",title:e.label.alertrestarthead},on:{ok:function(t){e.startNew(),e.$parent.nav="meta"}}},[r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.label.alertrestart))])],1):e._e()],1),e._v(" "),r("b-col",[r("h4",[e._v(e._s(e.label.loadJson))]),e._v(" "),r("b-form-file",{staticClass:"file-upload-text-overflow",attrs:{accept:".xml, .json"},on:{input:e.load},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},AfhI:function(e,t,r){"use strict";var s=r("PDg0"),a=r("yf/4"),i=r("VU/8"),n=i(s.a,a.a,!1,null,null,null);t.a=n.exports},DXDF:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"save"},[r("b-container",[r("b-row",[r("b-col",[e._v("\n        "+e._s(e.label.step4Desc)+"\n      ")])],1),e._v(" "),r("b-row",{staticClass:"mt-3"},[r("b-col",[r("b-list-group",[r("b-list-group-item",{attrs:{variant:e.validationResults.meta?"success":"danger"}},[r("h3",[e._v(e._s(e.labels.step1)+": "),r("b-badge",{attrs:{variant:"light"}},[e._v(e._s(e.metaFails.length))]),e._v(" "+e._s(e.label.errors)+"\n              "),e.validationResults.meta?r("i",{staticClass:"fas fa-check ml-3"}):e._e()],1),e._v(" "),e.metaFails.length>0?r("ul",e._l(e.metaFails,function(t,s){return r("li",{key:"meta"+s},[r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.split(/:(.+)/)[0])+":")]),e._v(" "+e._s(t.split(/:(.+)/)[1])+"\n              ")])})):e._e(),e._v(" "),e.validationResults.meta?e._e():r("b-button",{staticClass:"text-white",attrs:{size:"sm",variant:"danger"},on:{click:function(t){e.$parent.navigate("meta")}}},[r("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.label.jumpToMeta)+"\n            ")])],1),e._v(" "),r("b-list-group-item",{attrs:{variant:e.validationResults.bibl?"success":"danger"}},[r("h3",[e._v(e._s(e.labels.step2)+": "),r("b-badge",{attrs:{variant:"light"}},[e._v(e._s(e.biblFails.length))]),e._v(" "+e._s(e.label.errors)+"\n            "),e.validationResults.bibl?r("i",{staticClass:"fas fa-check ml-3"}):e._e()],1),e._v(" "),e.biblFails.length>0?r("ul",e._l(e.biblFails,function(t,s){return r("li",{key:"bibl"+s},[r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.split(/:(.+)/)[0])+":")]),e._v(" "+e._s(t.split(/:(.+)/)[1])+"\n              ")])})):e._e(),e._v(" "),e.validationResults.bibl?e._e():r("b-button",{staticClass:"text-white",attrs:{size:"sm",variant:"danger"},on:{click:function(t){e.$parent.navigate("bibl")}}},[r("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.label.jumpToBibl)+"\n            ")])],1),e._v(" "),r("b-list-group-item",{attrs:{variant:e.validationResults.correspDesc?"success":"danger"}},[r("h3",[e._v(e._s(e.labels.step3)+": "),r("b-badge",{attrs:{variant:"light"}},[e._v(e._s(e.correspDescFails.length))]),e._v("\n            "+e._s(1===e.correspDescFails.length?e.label.letterError:e.label.letterErrors)+"\n              "),e.validationResults.correspDesc?r("i",{staticClass:"fas fa-check ml-3"}):e._e()],1),e._v(" "),e.errorNoIds.place||e.errorNoIds.pers?r("ul",[e.errorNoIds.pers?r("li",[e._v(e._s(e.label.errorNoPersId))]):e._e(),e._v(" "),e.errorNoIds.place?r("li",[e._v(e._s(e.label.errorNoPlaceId))]):e._e()]):e._e(),e._v(" "),e.validationResults.correspDesc?e._e():r("b-button",{staticClass:"text-white mb-3",attrs:{size:"sm",variant:"danger"},on:{click:function(t){e.$parent.navigate("correspDesc")}}},[r("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.label.jumpToCd)+"\n            ")]),e._v(" "),e.correspDescFails.length>0?r("b-list-group",e._l(e.correspDescFails,function(t,s){return r("b-list-group-item",{key:"correspDesc"+s,staticClass:"danger-light",attrs:{variant:"danger"}},[r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.key?e.label.letterKey:e.label.id)+" "+e._s(t.key?"":t.id))]),e._v(" "),""!==t.key?r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.key))]):e._e(),e._v(" "),""!==t.sender?r("span",[e._v(e._s(e.label.headBy))]):e._e(),e._v(" "),""!==t.sender?r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.sender))]):e._e(),e._v(" "),""!==t.receiver?r("span",[e._v(e._s(e.label.headTo))]):e._e(),e._v(" "),""!==t.receiver?r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.receiver))]):e._e(),e._v(" "),t.fields.length?r("ul",e._l(t.fields,function(t){return r("li",[r("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.split(/:(.+)/)[0]))]),e._v(": "+e._s(t.split(/:(.+)/)[1])+"\n                    ")])})):e._e(),e._v(" "),r("b-button",{staticClass:"text-white ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(r){e.goToInvalidLetter(t.id,t.key)}}},[r("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.label.jumpToLetter)+"\n                ")])],1)})):e._e()],1)],1)],1)],1),e._v(" "),r("b-row",[r("b-col",{staticClass:"mt-3"},[r("b-form-checkbox",{attrs:{id:"downloadAsJSON",value:"json","unchecked-value":"xml"},on:{change:function(e){}},model:{value:e.downloadType,callback:function(t){e.downloadType=t},expression:"downloadType"}},[e._v(e._s(e.label.downloadAsJson))]),e._v(" "),r("b-button",{staticClass:"text-white btn-block mt-3",attrs:{href:e.downloadLink[e.downloadType],size:"lg",download:e.downloadFileName[e.downloadType]}},[e._v("\n          "+e._s(e.validationResults.meta&&e.validationResults.bibl&&e.validationResults.correspDesc?e.label.download:e.label.draft)+"\n        ")])],1)],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},GfHa:function(e,t){},Id91:function(e,t){},M93x:function(e,t,r){"use strict";function s(e){r("jgSm")}var a=r("xJD8"),i=r("o3sn"),n=r("VU/8"),l=s,o=n(a.a,i.a,!1,l,null,null);t.a=o.exports},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("qb6w"),a=(r.n(s),r("9M+g")),i=(r.n(a),r("7+uW")),n=r("e6fC"),l=r("M93x");i.a.use(n.a),i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",components:{App:l.a}})},PDg0:function(e,t,r){"use strict";t.a={name:"biblData",props:{labels:{type:Object,default:function(){return{}}},biblData:{type:Array,twoWays:!0},biblState:{type:Array,twoWays:!0}},data:function(){return{label:this.labels,nextKey:1,bibl:this.biblData,state:this.biblState}},methods:{setState:function(e,t){var r=!1;return"url"===t?r=""!==e.url?this.$parent.check("url",e.url):null:""!==e[t]&&null!==e[t]&&(r=!0),r},addBiblItem:function(){this.bibl.push({id:this.nextKey,uuid:this.uuid(),type:null,url:"",text:"",selected:""}),this.state.push({type:null,text:null,url:null}),this.nextKey+=1},rmBiblItem:function(e){for(var t=0;t<this.bibl.length;t+=1)e===this.bibl[t].id&&(this.bibl.splice(t,1),this.state.splice(t,1))},uuid:function(){var e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});return e=String.fromCharCode(Math.floor(26*Math.random())+97)+e.substr(1)}},mounted:function(){this.bibl[0].uuid=""===this.bibl[0].uuid?this.uuid():this.bibl[0].uuid}}},Pjk3:function(e,t,r){"use strict";t.a={name:"metaData",props:{labels:{type:Object,default:function(){return{}}},metaData:{type:Object,twoWays:!0},metaState:{type:Object,twoWays:!0}},data:function(){return{label:this.labels,meta:this.metaData,state:this.metaState}},methods:{addPublisher:function(){this.meta.publisher.push({name:"",url:""}),this.state.publisher.push({name:null,url:null})},rmPublisher:function(e){this.meta.publisher.splice(e,1),this.state.publisher.splice(e,1)},addEditor:function(){this.meta.editor.push({name:"",email:""}),this.state.editor.push({name:null,email:null})},rmEditor:function(e){this.meta.editor.splice(e,1),this.state.editor.splice(e,1)},setState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!1;return t?r?(""===e&&(s=null),""!==e&&this.$parent.check(t,e)&&(s=!0),""===e||this.$parent.check(t,e)||(s=!1)):s=this.$parent.check(t,e):s=""!==e,s}},computed:{}}},Pz0K:function(e,t,r){"use strict";var s=r("Xxa5"),a=r.n(s),i=r("exGp"),n=r.n(i);t.a={name:"correspDescData",data:function(){return{label:this.labels,page:1,filter:this.filterSpecs,type:["sender","receiver"],collapsed:this.correspDescData.length>1,nextKey:this.correspDescData.length>1?this.correspDescData.length:1,correspDesc:this.correspDescData,persons:this.pArrays.persons,places:this.pArrays.places,uriUnknown:"http://correspSearch.net/unknown",state:this.correspDescState}},props:{labels:{type:Object,default:function(){return{}}},pArrays:{type:Object,twoWays:!0,default:function(){return{persons:[],places:[]}}},filterSpecs:{type:Object,default:function(){return{type:"name",text:""}}},correspDescData:{type:Array,twoWays:!0},correspDescState:{type:Array,twoWays:!0}},methods:{console:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){console.log(e)}),setState:function(e,t,r){return"urlToXml"===e&&""!==this.correspDesc[t].ref?this.$parent.check("url",this.correspDesc[t].ref):("senderName"!==e&&"receiverName"!==e||""!==this.correspDesc[t][e.replace("Name","")].persName[r].text)&&("senderAuthority"!==e&&"receiverAuthority"!==e||""===this.correspDesc[t][e.replace("Authority","")].persName[r].ref?"senderPlaceAuthority"!==e&&"receiverPlaceAuthority"!==e||""===this.correspDesc[t][e.replace("PlaceAuthority","")].placeName[r].ref?(e.includes("when")||e.includes("notBefore")||e.includes("notAfter")||e.includes("spanFrom")||e.includes("spanTo"))&&""!==this.correspDesc[t][e.includes("Sender")?"sender":"receiver"][e.replace(/Receiver|Sender/g,"")]?this.$parent.check("date",this.correspDesc[t][e.includes("Sender")?"sender":"receiver"][e.replace(/Receiver|Sender/g,"")]):null:this.$parent.check("place",this.correspDesc[t][e.replace("PlaceAuthority","")].placeName[r].ref):this.$parent.check("person",this.correspDesc[t][e.replace("Authority","")].persName[r].ref))},setHeader:function(e){this.correspDesc[e].header=this.correspDesc[e].key?'<span class="badge badge-info mr-1">'+this.correspDesc[e].key+"</span>":"",this.correspDesc[e].header+=this.correspDesc[e].sender.persName[0].text?'<span class="badge badge-secondary mr-1">'+this.label.headBy+'</span><small class="mr-2 ml-1">'+this.correspDesc[e].sender.persName[0].text+"</small>":"",this.correspDesc[e].header+=this.correspDesc[e].receiver.persName[0].text?'<span class="badge badge-secondary mr-1">'+this.label.headTo+'</span><small class="mr-2 ml-1">'+this.correspDesc[e].receiver.persName[0].text+"</small>":""},setIdUnknown:function(e,t,r){var s=this;this.$nextTick(function(){"true"===s.correspDesc[t][e].persName[r].unknown?(s.correspDesc[t][e].persName[r].ref=""!==s.correspDesc[t][e].persName[r].ref.trim()?s.correspDesc[t][e].persName[r].ref:s.uriUnknown,s.correspDesc[t][e].persName[r].text=""!==s.correspDesc[t][e].persName[r].text.trim()?s.correspDesc[t][e].persName[r].text:s.label.unknown,s.state[t][e][r].id=""!==s.correspDesc[t][e].persName[r].ref.trim(),s.state[t][e][r].name=""!==s.correspDesc[t][e].persName[r].text.trim()):(s.correspDesc[t][e].persName[r].ref=""!==s.correspDesc[t][e].persName[r].ref.trim()&&s.correspDesc[t][e].persName[r].ref!==s.uriUnknown?s.correspDesc[t][e].persName[r].ref:"",s.correspDesc[t][e].persName[r].text=""!==s.correspDesc[t][e].persName[r].text.trim()&&s.correspDesc[t][e].persName[r].text!==s.label.unknown?s.correspDesc[t][e].persName[r].text:"",s.state[t][e][r].id=""!==s.correspDesc[t][e].persName[r].ref.trim()||null,s.state[t][e][r].name=""!==s.correspDesc[t][e].persName[r].text.trim())})},getRealKey:function(e){for(var t=0;t<this.correspDesc.length;t+=1)if(this.correspDesc[t].id===e)return t;return 0},asyncDataRequest:function(e){var t=this;return n()(a.a.mark(function r(){var s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return s=t.sent,t.next=5,s.json();case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}},r,t)}))()},getGnd:function(e,t,r){var s=this,a="true"===this.correspDesc[t][e].persName[r].organisation?"CorporateBody":"Person";this.asyncDataRequest("https://lobid.org/gnd/search?q="+this.correspDesc[t][e].persName[r].text+"&format=json:suggest&filter=type:"+a).then(function(a){s.correspDesc[t][e].persName[r].gnd.suggestions=a,s.correspDesc[t][e].persName[r].gnd.all=a.length,s.correspDesc[t][e].persName[r].gnd.open=!0,s.$nextTick(function(){s.$refs[e+"PersID"+t+r][0].$el.focus()})})},getMoreGnd:function(e,t,r){var s=this.correspDesc[t][e].persName[r].text,a="true"===this.correspDesc[t][e].persName[r].organisation?"CorporateBody":"Person";window.open("https://lobid.org/gnd/search?q="+s+"&filter=type:"+a,"_blank")},selectGnd:function(e,t,r,s){for(var a=0;a<this.persons.length;a+=1)this.persons[a].text===this.correspDesc[t][e].persName[r].text&&(this.persons[a].ref=s.id);this.correspDesc[t][e].persName[r].ref=s.id,this.correspDesc[t][e].persName[r].gnd.suggestions=[],this.correspDesc[t][e].persName[r].gnd.open=!1,this.correspDesc[t][e].persName[r].gnd.highlighted=0,this.correspDesc[t][e].persName[r].selected=!0},getGeodata:function(e,t,r){var s=this;this.asyncDataRequest("https://correspsearch.net/api/v1.1/services/getGeonames.xql?q="+this.correspDesc[t][e].placeName[r].text+"&fc="+this.correspDesc[t][e].placeName[r].geo.parameter).then(function(a){s.correspDesc[t][e].placeName[r].geo.suggestions=a.geonames,s.correspDesc[t][e].placeName[r].geo.all=a.totalResultsCount,a.totalResultsCount>0&&(s.correspDesc[t][e].placeName[r].geo.open=!0),s.$nextTick(function(){s.$refs[e+"PlaceID"+t+r][0].$el.focus()})})},selectGeoname:function(e,t,r,s){for(var a=0;a<this.places.length;a+=1)this.places[a].text===this.correspDesc[t][e].placeName[r].text&&(this.places[a].ref="http://www.geonames.org/"+s.geonameId);this.correspDesc[t][e].placeName[r].ref="http://www.geonames.org/"+s.geonameId,this.correspDesc[t][e].placeName[r].geo.suggestions=[],this.correspDesc[t][e].placeName[r].geo.open=!1,this.correspDesc[t][e].placeName[r].geo.highlighted=0,this.correspDesc[t][e].placeName[r].selected=!0},filterNames:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];if(s){if(this.correspDesc[t][e].placeName[r].text)for(var i=this.correspDesc[t][e].placeName[r].text,n=new RegExp(i.toUpperCase(),"i"),l=0;l<this.places.length;l+=1)void 0!==this.places[l].text&&""!==this.places[l].text&&this.places[l].text.toUpperCase().match(n)&&a.push(this.places[l].text)}else for(var o=this.correspDesc[t][e].persName[r].text,c=new RegExp(o.toUpperCase(),"i"),p=0;p<this.persons.length;p+=1)this.persons[p].text.toUpperCase().match(c)&&""!==this.persons[p].text&&a.push(this.persons[p].text);return a},addOrg:function(e,t,r){var s=this;if(this.correspDesc[t][e].persName[r].text)for(var a=0;a<this.persons.length;a+=1)this.persons[a].text===this.correspDesc[t][e].persName[r].text&&(this.persons[a].org=this.correspDesc[t][e].persName[r].organisation);if(this.correspDesc[t][e].persName[r].text)for(var i=0;i<this.correspDesc.length;i+=1)!function(a){s.type.forEach(function(i){for(var n=0;n<s.correspDesc[a][i].persName.length;n+=1)s.correspDesc[a][i].persName[n].text===s.correspDesc[t][e].persName[r].text&&(s.correspDesc[a][i].persName[n].organisation=s.correspDesc[t][e].persName[r].organisation)})}(i)},addPersNorm:function(e,t,r){var s=this;if(""!==this.correspDesc[t][e].persName[r].text.trim()&&""!==this.correspDesc[t][e].persName[r].ref.trim())for(var a=0;a<this.persons.length;a+=1)if(this.persons[a].text===this.correspDesc[t][e].persName[r].text&&this.persons[a].ref!==this.correspDesc[t][e].persName[r].ref){this.persons[a].ref=this.correspDesc[t][e].persName[r].ref;break}if(this.correspDesc[t][e].persName[r].text)for(var i=0;i<this.correspDesc.length;i+=1)!function(a){s.type.forEach(function(i){for(var n=0;n<s.correspDesc[a][i].persName.length;n+=1)s.correspDesc[a][i].persName[n].text===s.correspDesc[t][e].persName[r].text&&s.correspDesc[a][i].persName[n].ref!==s.uriUnknown&&(s.correspDesc[a][i].persName[n].ref=s.correspDesc[t][e].persName[r].ref)})}(i);""===this.correspDesc[t][e].persName[r].ref.trim()&&"true"===this.correspDesc[t][e].persName[r].unknown&&this.$set(this.correspDesc[t][e].persName[r],"unknown",!1)},addPersonToPool:function(e,t,r){if(this.correspDesc[t][e].persName[r].text!==this.label.unknown)if(0===this.persons.length)this.persons.push({text:this.correspDesc[t][e].persName[r].text,ref:this.correspDesc[t][e].persName[r].ref,org:this.correspDesc[t][e].persName[r].organisation});else{for(var s=!1,a=0;a<this.persons.length&&!(s=this.persons[a].text===this.correspDesc[t][e].persName[r].text);a+=1);s||this.persons.push({text:this.correspDesc[t][e].persName[r].text,ref:this.correspDesc[t][e].persName[r].ref,org:this.correspDesc[t][e].persName[r].organisation})}else this.correspDesc[t][e].persName[r].ref=this.uriUnknown,this.correspDesc[t][e].persName[r].unknown=!0;this.correspDesc[t][e].persName[r].open=!1},addPlaceNorm:function(e,t,r){var s=this;if(""!==this.correspDesc[t][e].placeName[r].text.trim()&&""!==this.correspDesc[t][e].placeName[r].ref.trim())for(var a=0;a<this.places.length;a+=1)if(this.places[a].text===this.correspDesc[t][e].placeName[r].text&&this.places[a].ref!==this.correspDesc[t][e].placeName[r].ref){this.places[a].ref=this.correspDesc[t][e].placeName[r].ref;break}if(this.correspDesc[t][e].placeName[r].text)for(var i=0;i<this.correspDesc.length;i+=1)!function(a){["sender","receiver"].forEach(function(i){for(var n=0;n<s.correspDesc[a][i].placeName.length;n+=1)s.correspDesc[a][i].placeName[n].text===s.correspDesc[t][e].placeName[r].text&&(s.correspDesc[a][i].placeName[n].ref=s.correspDesc[t][e].placeName[r].ref)})}(i)},addPlaceToPool:function(e,t,r){if(0===this.places.length)this.places.push({text:this.correspDesc[t][e].placeName[r].text,ref:this.correspDesc[t][e].placeName[r].ref});else{for(var s=!1,a=0;a<this.places.length&&!(s=this.places[a].text===this.correspDesc[t][e].placeName[r].text);a+=1);s||this.places.push({text:this.correspDesc[t][e].placeName[r].text,ref:this.correspDesc[t][e].placeName[r].ref})}this.correspDesc[t][e].placeName[r].open=!1},onInput:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s||(this.correspDesc[t][e].persName[r].selected?this.correspDesc[t][e].persName[r].selected=!1:this.correspDesc[t][e].persName[r].text.length>2&&this.persons.length>0&&(this.correspDesc[t][e].persName[r].open=!!this.correspDesc[t][e].persName[r].text,this.correspDesc[t][e].persName[r].highlighted=0===this.correspDesc[t][e].persName[r].highlighted?0:this.correspDesc[t][e].persName[r].highlighted)),s&&(null!==this.correspDesc[t][e].placeName[r].text&&(this.correspDesc[t][e].placeName[r].selected?this.correspDesc[t][e].placeName[r].selected=!1:this.places.length>0&&(this.correspDesc[t][e].placeName[r].open=!!this.correspDesc[t][e].placeName[r].text,this.correspDesc[t][e].placeName[r].highlighted=0===this.correspDesc[t][e].placeName[r].highlighted?0:this.correspDesc[t][e].placeName[r].highlighted)),""===this.correspDesc[t][e].placeName[r].text&&(this.correspDesc[t][e].placeName[r].conjecture=!1,this.correspDesc[t][e].placeName[r].uncertain=!1))},select:function(e,t,r){var s=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="",n=-1;if(a){if(this.correspDesc[t][e].placeName[r].text.length>2){var l=this.filterNames(e,t,r,!0)[this.correspDesc[t][e].placeName[r].highlighted];this.$nextTick(function(){for(var a=0;a<s.places.length;a+=1)if(void 0!==s.places[a].text&&l===s.places[a].text){s.correspDesc[t][e].placeName[r].text=s.places[a].text,s.correspDesc[t][e].placeName[r].ref=s.places[a].ref,s.correspDesc[t][e].placeName[r].open=!1,s.correspDesc[t][e].placeName[r].selected=!0,s.places[a].ref&&(s.state[t][e+"Place"][r].id=s.setState(e+"PlaceAuthority",t,r));break}})}}else if(this.correspDesc[t][e].persName[r].text.length>2){var o=this.filterNames(e,t,r)[this.correspDesc[t][e].persName[r].highlighted];i=this.correspDesc[t][e].persName[r].text,this.$nextTick(function(){for(var a=0;a<s.persons.length;a+=1)s.persons[a].text===i&&(n=a),s.persons[a].text===o&&(s.correspDesc[t][e].persName[r].text=s.persons[a].text,s.correspDesc[t][e].persName[r].ref=s.persons[a].ref,s.correspDesc[t][e].persName[r].organisation=s.persons[a].org,s.correspDesc[t][e].persName[r].open=!1,s.correspDesc[t][e].persName[r].selected=!0,s.persons[a].ref&&(s.state[t][e][r].id=s.setState(e+"Authority",t,r)),s.correspDesc[t][e].persName[r].unknown=s.persons[a].unknown);i!==s.correspDesc[t][e].persName[r].text&&s.correspDesc[t][e].persName[r].text.includes(i)&&n>-1&&s.persons.splice(n,1)})}},moveUp:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s?this.correspDesc[t][e].placeName[r].open?this.correspDesc[t][e].placeName[r].highlighted=this.correspDesc[t][e].placeName[r].highlighted-1<0?this.filterNames(e,t,0,!0).length-1:(this.correspDesc[t][e].placeName[r].highlighted-1)%this.filterNames(e,t,r,!0).length:a&&this.correspDesc[t][e].placeName[r].geo.open&&(this.correspDesc[t][e].placeName[r].geo.highlighted=this.correspDesc[t][e].placeName[r].geo.highlighted-1<0?this.correspDesc[t][e].placeName[r].geo.all-1:(this.correspDesc[t][e].placeName[r].geo.highlighted-1)%this.correspDesc[t][e].placeName[r].geo.all):this.correspDesc[t][e].persName[r].open&&(this.correspDesc[t][e].persName[r].highlighted=this.correspDesc[t][e].persName[r].highlighted-1<0?this.filterNames(e,t,r).length-1:(this.correspDesc[t][e].persName[r].highlighted-1)%this.filterNames(e,t,r).length)},moveDown:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s?this.correspDesc[t][e].placeName[r].open?this.correspDesc[t][e].placeName[r].highlighted=(this.correspDesc[t][e].placeName[r].highlighted+1)%this.filterNames(e,t,r,!0).length:a&&this.correspDesc[t][e].placeName[r].geo.open&&(this.correspDesc[t][e].placeName[r].geo.highlighted=(this.correspDesc[t][e].placeName[r].geo.highlighted+1)%this.correspDesc[t][e].placeName[r].geo.all):this.correspDesc[t][e].persName[r].open&&(this.correspDesc[t][e].persName[r].highlighted=(this.correspDesc[t][e].persName[r].highlighted+1)%this.filterNames(e,t,r).length)},addPerson:function(e,t){this.state[t][e].push({name:null,id:null}),this.correspDesc[t][e].persName.push({text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}})},rmPerson:function(e,t,r){this.correspDesc[t][e].persName.splice(r,1),this.state[t][e].splice(r,1);for(var s=0;s<this.correspDesc[t][e].persName.length;s+=1)this.correspDesc[t][e].persName[s].selected=!0},addPlace:function(e,t){this.state[t][e+"Place"].push({name:null,id:null}),this.correspDesc[t][e].placeName.push({text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:0,suggestions:[],all:0,parameter:"P"}})},rmPlace:function(e,t,r){this.state[r][e+"Place"].splice(r,1),this.correspDesc[t][e].placeName.splice(r,1);for(var s=0;s<this.correspDesc[t][e].placeName.length;s+=1)this.correspDesc[t][e].placeName[s].selected=!0},addCorrespDescItem:function(){var e=this;this.filter={type:"name",text:""},this.state.push({urlToXml:null,sender:[{name:null,id:null}],receiver:[{name:null,id:null}],senderPlace:[{name:null,id:null}],receiverPlace:[{name:null,id:null}],senderDate:{when:null,notBefore:null,notAfter:null,from:null,to:null},receiverDate:{when:null,notBefore:null,notAfter:null,from:null,to:null}}),this.correspDesc.push({id:this.nextKey,visible:!0,header:"",ref:"",refHidden:!0,key:"",bibl:0,sender:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:0,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0},receiver:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:0,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0}}),this.nextKey+=1,this.page=Math.ceil(this.correspDesc.length/10);for(var t=0;t<this.filteredCorrespDesc.paginatedResults.length-1;t+=1)this.filteredCorrespDesc.paginatedResults[t].visible=!1;setTimeout(function(){location.hash="#"+(e.nextKey-1),document.getElementById("correspDescKey"+(e.nextKey-1)).focus()},1e3)},rmCorrespDescItem:function(e){for(var t=0;t<this.correspDesc.length;t+=1)if(e===this.correspDesc[t].id){this.correspDesc.splice(t,1),this.state.splice(t,1);break}for(var r=0;r<this.correspDesc.length;r+=1)this.correspDesc[r].id=r;this.nextKey=this.correspDesc.length},toggleAll:function(){var e=this;this.$nextTick(function(){for(var t=0;t<e.filteredCorrespDesc.paginatedResults.length;t+=1)e.filteredCorrespDesc.paginatedResults[t].visible=e.collapsed;e.collapsed=!e.collapsed})},closeAll:function(){var e=this;this.$nextTick(function(){for(var t=0;t<e.filteredCorrespDesc.paginatedResults.length;t+=1)e.filteredCorrespDesc.paginatedResults[t].visible=!1;e.collapsed=!0})}},mounted:function(){if(document.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.setAttribute("tabindex","-1")}),1===this.correspDesc.length&&(this.correspDesc[0].visible=!0),"id"!==this.filter.type&&"key"!==this.filter.type)this.$nextTick(function(){document.getElementById("correspDescKey0").focus()});else if("key"===this.filter.type){for(var e=0;e<this.correspDesc.length;e+=1)if(this.correspDesc[e].key===this.filter.text){this.correspDesc[e].visible=!0;break}}else this.correspDesc[this.filter.text].visible=!0},computed:{filteredCorrespDesc:function(){var e=[];if(""===this.filter.text&&this.correspDesc.forEach(function(t){e.push(t)}),"name"===this.filter.type&&""!==this.filter.text)for(var t=0;t<this.correspDesc.length;t+=1){for(var r=!1,s=0;s<this.correspDesc[t].sender.persName.length;s+=1)this.correspDesc[t].sender.persName[s].text.toUpperCase().includes(this.filter.text.toUpperCase())&&(e.push(this.correspDesc[t]),r=!0);for(var a=0;a<this.correspDesc[t].receiver.persName.length;a+=1)this.correspDesc[t].receiver.persName[a].text.toUpperCase().includes(this.filter.text.toUpperCase())&&(r||e.push(this.correspDesc[t]))}if("place"===this.filter.type&&""!==this.filter.text)for(var i=0;i<this.correspDesc.length;i+=1){for(var n=!1,l=0;l<this.correspDesc[i].sender.placeName.length;l+=1)this.correspDesc[i].sender.placeName[l].text&&this.correspDesc[i].sender.placeName[l].text.toUpperCase().includes(this.filter.text.toUpperCase())&&(e.push(this.correspDesc[i]),n=!0);for(var o=0;o<this.correspDesc[i].receiver.placeName.length;o+=1)void 0!==this.correspDesc[i].receiver.placeName[o].text&&this.correspDesc[i].receiver.placeName[o].text.toUpperCase().includes(this.filter.text.toUpperCase())&&(n||e.push(this.correspDesc[i]))}if("key"===this.filter.type&&""!==this.filter.text)for(var c=0;c<this.correspDesc.length;c+=1)this.correspDesc[c].key===this.filter.text&&e.push(this.correspDesc[c]);if("id"===this.filter.type&&""!==this.filter.text&&e.push(this.correspDesc[this.filter.text]),"date"===this.filter.type&&""!==this.filter.text)for(var p=0;p<this.correspDesc.length;p+=1){var u=!1;this.correspDesc[p].sender.when&&this.correspDesc[p].sender.when.includes(this.filter.text)&&(e.push(this.correspDesc[p]),u=!0),(this.correspDesc[p].sender.notBefore&&this.correspDesc[p].sender.notBefore.includes(this.filter.text)||this.correspDesc[p].sender.notAfter&&this.correspDesc[p].sender.notAfter.includes(this.filter.text)||this.correspDesc[p].sender.spanFrom&&this.correspDesc[p].sender.spanFrom.includes(this.filter.text)||this.correspDesc[p].sender.spanTo&&this.correspDesc[p].sender.spanTo.includes(this.filter.text)||this.correspDesc[p].sender.dateAsText&&this.correspDesc[p].sender.dateAsText.includes(this.filter.text))&&(u||(e.push(this.correspDesc[p]),u=!0)),(this.correspDesc[p].receiver.when&&this.correspDesc[p].receiver.when.includes(this.filter.text)||this.correspDesc[p].receiver.notBefore&&this.correspDesc[p].receiver.notBefore.includes(this.filter.text)||this.correspDesc[p].receiver.notAfter&&this.correspDesc[p].receiver.notAfter.includes(this.filter.text)||this.correspDesc[p].receiver.spanFrom&&this.correspDesc[p].receiver.spanFrom.includes(this.filter.text)||this.correspDesc[p].receiver.spanTo&&this.correspDesc[p].receiver.spanTo.includes(this.filter.text)||this.correspDesc[p].receiver.dateAsText&&this.correspDesc[p].receiver.dateAsText.includes(this.filter.text))&&(u||(e.push(this.correspDesc[p]),u=!0))}return{paginatedResults:e.slice(1===this.page?0:10*(this.page-1),10+(1===this.page?0:10*(this.page-1))),results:e}}}}},"Y+wC":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"metaData"},[r("b-container",[r("b-row",[r("b-col",[r("h3",[e._v(e._s(e.label.metaData))]),e._v("\n        "+e._s(e.label.step1Desc)+"\n      ")])],1),e._v(" "),r("b-row",{staticClass:"mt-2"},[r("b-col",[r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.title+"*","invalid-feedback":e.label.errorMetaTitle,"label-for":"title"}},[r("b-form-input",{attrs:{id:"title",size:"sm",state:e.state.title},nativeOn:{blur:function(t){e.state.title=e.setState(e.meta.title)}},model:{value:e.meta.title,callback:function(t){e.$set(e.meta,"title",t)},expression:"meta.title"}})],1),e._v(" "),e._l(e.meta.editor,function(t,s){return r("b-card",{key:"editor_"+s,staticClass:"mb-2",attrs:{"no-body":""}},[r("b-card-header",[r("b-row",{attrs:{"align-h":"end"}},[r("b-col",[e._v("\n                "+e._s(e.label.editor)+"\n              ")]),e._v(" "),r("b-col",{attrs:{cols:"1"}},[e.meta.editor.length>1?r("b-button",{staticClass:"w-100",attrs:{size:"sm"},on:{click:function(t){e.rmEditor(s)}}},[r("i",{staticClass:"fa fa-trash-alt"})]):e._e()],1)],1)],1),e._v(" "),r("b-card-body",[r("b-form-group",{attrs:{horizontal:"","label-cols":3,"label-size":"sm",label:e.label.editor+"*","invalid-feedback":e.label.errorMetaEditor,"label-for":"editor"}},[r("b-form-input",{attrs:{id:"editor",size:"sm",state:e.state.editor[s].name},nativeOn:{blur:function(r){e.state.editor[s].name=e.setState(t.name)}},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"editor.name"}})],1),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":3,"label-size":"sm",label:e.label.editorEmail+"*","invalid-feedback":e.meta.editor[s].email?e.label.errorMetaEmailFormat:e.label.errorMetaEmailEmpty,"label-for":"editorEmail"}},[r("b-form-input",{attrs:{id:"editorEmail",size:"sm",state:e.state.editor[s].email,type:"email"},nativeOn:{blur:function(r){e.state.editor[s].email=e.setState(t.email,"email")}},model:{value:t.email,callback:function(r){e.$set(t,"email",r)},expression:"editor.email"}})],1)],1)],1)}),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:e.addEditor}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label.addEditor)+"\n        ")]),e._v(" "),e._l(e.meta.publisher,function(t,s){return r("b-card",{key:"publisher_"+s,staticClass:"mb-2",attrs:{"no-body":""}},[r("b-card-header",[r("b-row",{attrs:{"align-h":"end"}},[r("b-col",[e._v("\n                "+e._s(e.label.publisher)+"\n              ")]),e._v(" "),r("b-col",{attrs:{cols:"1"}},[e.meta.publisher.length>1?r("b-button",{staticClass:"w-100",attrs:{size:"sm"},on:{click:function(t){e.rmPublisher(s)}}},[r("i",{staticClass:"fa fa-trash-alt"})]):e._e()],1)],1)],1),e._v(" "),r("b-card-body",[r("b-form-group",{attrs:{horizontal:"","label-cols":3,"label-size":"sm",label:e.label.publisher+"*","invalid-feedback":e.label.errorMetaPublisher,"label-for":"publisher"}},[r("b-form-input",{attrs:{id:"publisher",size:"sm",state:e.state.publisher[s].name},nativeOn:{blur:function(r){e.state.publisher[s].name=e.setState(t.name)}},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"publisher.name"}})],1),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":3,"label-size":"sm",label:e.label.publisherWebsite,"invalid-feedback":e.label.errorURLFormat,"label-for":"publisherWebsite"}},[r("b-form-input",{attrs:{id:"publisherWebsite",size:"sm",type:"url",state:e.state.publisher[s].url},nativeOn:{blur:function(r){e.state.publisher[s].url=e.setState(t.url,"url",!0)}},model:{value:t.url,callback:function(r){e.$set(t,"url",r)},expression:"publisher.url"}})],1)],1)],1)}),e._v(" "),r("b-button",{staticClass:"mb-2",attrs:{size:"sm",variant:"secondary"},on:{click:e.addPublisher}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label.addPublisher)+"\n        ")]),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.urlToXml,"invalid-feedback":e.label.errorURLFormat,"label-for":"urlToXml"}},[r("b-form-input",{attrs:{id:"urlToXml",size:"sm",type:"url",state:e.state.url},nativeOn:{blur:function(t){e.state.url=e.setState(e.meta.url,"url",!0)}},model:{value:e.meta.url,callback:function(t){e.$set(e.meta,"url",t)},expression:"meta.url"}})],1),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.licence+"*","invalid-feedback":e.label.errorMetaLicence,"label-for":"licence"}},[r("b-form-select",{attrs:{size:"sm",state:e.state.licence},nativeOn:{blur:function(t){e.state.licence=e.setState(e.meta.licence)}},model:{value:e.meta.licence,callback:function(t){e.$set(e.meta,"licence",t)},expression:"meta.licence"}},[r("option",{attrs:{value:"CC0"}},[e._v("CC0")]),e._v(" "),r("option",{attrs:{value:"CC-BY 4.0"}},[e._v("CC-BY 4.0")])])],1)],2)],1),e._v(" "),r("b-row",[r("b-col",[r("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"secondary"},on:{click:function(t){e.$parent.navigate("bibl")}}},[e._v("\n          "+e._s(e.label.continue)+"\n        ")])],1)],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},Z0ZQ:function(e,t,r){"use strict";var s=r("qFte"),a=r("DXDF"),i=r("VU/8"),n=i(s.a,a.a,!1,null,null,null);t.a=n.exports},cYMH:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"correspDescData"},[r("b-container",[r("b-row",[r("b-col",[r("h2",[e._v(e._s(e.label.letterRecords))]),e._v("\n        "+e._s(e.label.step3Desc)+"\n      ")])],1),e._v(" "),r("b-row",{staticClass:"mt-3"},[r("b-col",{staticClass:"text-center"},[e._v("\n      "+e._s((e.filteredCorrespDesc.results.length<10?(0===e.filteredCorrespDesc.results.length?0:1)+"-"+e.filteredCorrespDesc.results.length:10*this.page-10+1+"-"+(10*this.page>e.filteredCorrespDesc.results.length?e.filteredCorrespDesc.results.length:10*this.page))+"/"+e.filteredCorrespDesc.results.length)+"\n      "),""!==e.filter.text?r("b-badge",{staticClass:"csOrange"},[e._v(e._s(e.label.filtered))]):e._e()],1)],1),e._v(" "),r("b-row",{staticClass:"mt-3"},[r("b-col",[e.collapsed?r("b-button",{attrs:{size:"sm"},on:{click:e.toggleAll}},[r("i",{staticClass:"fa fa-angle-double-right"}),e._v(" "+e._s(e.label.expandAll)+"\n        ")]):e._e(),e._v(" "),e.collapsed?e._e():r("b-button",{attrs:{size:"sm"},on:{click:e.toggleAll}},[r("i",{staticClass:"fa fa-angle-double-down"}),e._v(" "+e._s(e.label.collapseAll)+"\n        ")])],1),e._v(" "),r("b-col",[r("b-pagination",{attrs:{align:"center",size:"sm","total-rows":e.filteredCorrespDesc.results.length,"per-page":10},on:{change:e.closeAll},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),e._v(" "),r("b-col",[r("b-input-group",{attrs:{size:"sm",prepend:"Filter"}},[r("b-form-select",{model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}},[r("option",{attrs:{value:"name"}},[e._v(e._s(e.label.byName))]),e._v(" "),r("option",{attrs:{value:"place"}},[e._v(e._s(e.label.byPlace))]),e._v(" "),r("option",{attrs:{value:"date"}},[e._v(e._s(e.label.byDate))]),e._v(" "),r("option",{attrs:{value:"key"}},[e._v(e._s(e.label.byKey))]),e._v(" "),r("option",{attrs:{value:"id"}},[e._v(e._s(e.label.byID))])]),e._v(" "),r("b-form-input",{model:{value:e.filter.text,callback:function(t){e.$set(e.filter,"text",t)},expression:"filter.text"}})],1)],1)],1),e._v(" "),r("b-row",[r("b-col",{attrs:{role:"tablist"}},e._l(e.filteredCorrespDesc.paginatedResults,function(t,s){return r("b-card",{key:"cd_"+t.id,staticClass:"mb-2",attrs:{"no-body":"",id:t.id}},[r("b-card-header",{staticClass:"bg-white border-0",attrs:{"header-tag":"header",role:"tab"}},[r("b-row",[r("b-col",{attrs:{cols:"1"}},[r("b-button-toolbar",[r("b-button-group",[r("b-button",{staticClass:"border-right",class:t.visible?"collapsed":null,attrs:{"aria-controls":"collapse"+s,"aria-expanded":t.visible?"true":"false",size:"sm"},on:{click:function(e){t.visible=!t.visible}}},[r("i",{staticClass:"fa",class:t.visible?"fa-angle-up":"fa-angle-down"})]),e._v(" "),e.correspDesc.length>1?r("b-button",{staticClass:"border-left",attrs:{size:"sm"},on:{click:function(r){e.rmCorrespDescItem(t.id)}}},[r("i",{staticClass:"fa fa-trash-alt"})]):e._e()],1)],1)],1),e._v(" "),r("b-col",{staticClass:"float-left",domProps:{innerHTML:e._s(t.header)}})],1)],1),e._v(" "),r("b-collapse",{attrs:{id:"collapse"+s,role:"tabpanel"},model:{value:t.visible,callback:function(r){e.$set(t,"visible",r)},expression:"item.visible"}},[r("b-card-body",{staticClass:"correspDescCardBody"},[r("b-form-group",{staticClass:"mb-1",attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.key,"label-for":"correspDescKey"+t.id}},[r("b-form-input",{attrs:{id:"correspDescKey"+t.id,size:"sm"},nativeOn:{keyup:function(r){e.setHeader(t.id)}},model:{value:t.key,callback:function(r){e.$set(t,"key",r)},expression:"item.key"}})],1),e._v(" "),r("b-row",[r("b-col",{attrs:{sm:"2"}}),e._v(" "),r("b-col",{staticClass:"p-px-11"},[r("b-button",{staticClass:"mb-1",attrs:{size:"sm"},on:{click:function(e){t.refHidden=!t.refHidden}}},[r("i",{staticClass:"fa",class:t.refHidden?"fa-angle-down":"fa-angle-up"}),e._v(" "+e._s(e.label.urlToXml)+"\n                  ")])],1)],1),e._v(" "),t.refHidden?e._e():r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.urlToXml,"label-for":"correspDescRef","invalid-feedback":e.label.errorURLFormat}},[r("b-form-input",{attrs:{id:"correspDescRef",size:"sm",type:"url",state:e.state[t.id].urlToXml},nativeOn:{blur:function(r){e.state[t.id].urlToXml=e.setState("urlToXml",t.id)}},model:{value:t.ref,callback:function(r){e.$set(t,"ref",r)},expression:"item.ref"}})],1),e._v(" "),""!==e.$parent.biblData[0].text?r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.bibliography,"label-for":"correspDescBibl"}},[r("b-form-select",{attrs:{size:"sm"},model:{value:t.bibl,callback:function(r){e.$set(t,"bibl",r)},expression:"item.bibl"}},e._l(e.$parent.biblData,function(s){return r("option",{key:"bib_"+t.id+s.id,domProps:{value:s.id}},[e._v("\n                          "+e._s(String(s.text).length>100?String(s.text).slice(0,100)+" ...":s.text)+"\n                  ")])}))],1):e._e(),e._v(" "),r("b-row",e._l(e.type,function(s,a){return r("b-col",{key:"t_"+t.id+a},[r("h3",[e._v(e._s(e.label[s]))]),e._v(" "),e._l(t[s].persName,function(a,i){return r("b-card",{key:"ps_"+t.id+i,staticClass:"mb-2",attrs:{"no-body":""}},[r("b-card-header",[r("b-row",{attrs:{"align-h":"between"}},[r("b-col",{attrs:{cols:"2"}},[t[s].persName.length>1?r("b-button",{attrs:{size:"sm"},on:{click:function(r){e.rmPerson(s,t.id,i)}}},[r("i",{staticClass:"fa fa-trash-alt"})]):e._e()],1),e._v(" "),r("b-col",{staticClass:"text-right"},[r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"Conjecture"+t.id+i,value:"true","unchecked-value":"false"},model:{value:a.conjecture,callback:function(t){e.$set(a,"conjecture",t)},expression:"s.conjecture"}},[e._v(e._s(e.label.conjecture))]),e._v(" "),r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"Uncertain"+t.id+i,value:"true","unchecked-value":"false"},model:{value:a.uncertain,callback:function(t){e.$set(a,"uncertain",t)},expression:"s.uncertain"}},[e._v(e._s(e.label.uncertain))]),e._v(" "),r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"Unknown"+t.id+i,value:"true","unchecked-value":"false"},on:{change:function(r){e.setIdUnknown(s,t.id,i)}},model:{value:a.unknown,callback:function(t){e.$set(a,"unknown",t)},expression:"s.unknown"}},[e._v(e._s(e.label.unknown))])],1)],1)],1),e._v(" "),r("b-card-body",[r("b-form-group",{staticClass:"labelOnTop",attrs:{"label-size":"sm",label:e.label.name,"label-for":s+"PersName"+i,"invalid-feedback":e.label.errorMetaEditor}},[r("b-form-input",{attrs:{id:s+"PersName"+i,state:e.state[t.id][s][i].name,size:"sm"},nativeOn:{blur:function(r){e.addPersonToPool(s,t.id,i),e.state[t.id][s][i].name=e.setState(s+"Name",t.id,i)},keyup:function(r){e.onInput(s,t.id,i,!1),e.setHeader(t.id)},keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;a.open=!1},function(r){if(!("button"in r)&&e._k(r.keyCode,"down",40,r.key,["Down","ArrowDown"]))return null;e.moveDown(s,t.id,i)},function(r){if(!("button"in r)&&e._k(r.keyCode,"up",38,r.key,["Up","ArrowUp"]))return null;e.moveUp(s,t.id,i)},function(r){if(!("button"in r)&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.select(s,t.id,i)}]},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"s.text"}})],1),e._v(" "),a.open&&a.text.length>2?r("b-list-group",e._l(e.filterNames(s,t.id,i),function(n,l){return r("b-list-group-item",{key:"pss_"+t.id+l,class:{highlighted:l===a.highlighted},attrs:{button:""},on:{mousedown:function(r){e.select(s,t.id,i)},mouseenter:function(e){a.highlighted=l}}},[e._v("\n                            "+e._s(n)+"\n                        ")])})):e._e(),e._v(" "),r("b-form-group",{staticClass:"labelOnTop",attrs:{"label-size":"sm",label:e.label[s+"Authority"],"label-for":s+"PersID"+t.id+i}},[r("b-input-group",[r("b-form-input",{ref:s+"PersID"+t.id+i,refInFor:!0,attrs:{id:s+"PersID"+t.id+i,size:"sm",state:e.state[t.id][s][i].id},nativeOn:{blur:function(r){e.addPersNorm(s,t.id,i),t[s].persName[i].gnd.open=!1,e.state[t.id][s][i].id=e.setState(s+"Authority",t.id,i)},keydown:function(r){if(!("button"in r)&&e._k(r.keyCode,"esc",27,r.key,"Escape"))return null;t[s].persName[i].gnd.open=!1}},model:{value:a.ref,callback:function(t){e.$set(a,"ref",t)},expression:"s.ref"}}),e._v(" "),r("b-input-group-append",[r("b-btn",{staticClass:"text-white",attrs:{variant:"secondary",id:s+"GetGndBtn"+t.id+i,disabled:""===a.text||!0===a.unknown,title:e.label.gndBtnTitle,target:"_blank"},on:{click:function(r){e.getGnd(s,t.id,i)}}},[r("i",{staticClass:"fa fa-address-card"})])],1),e._v(" "),r("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.label.errorAuthorityID))])],1)],1),e._v(" "),t[s].persName[i].gnd.open?r("b-list-group",[e._l(t[s].persName[i].gnd.suggestions,function(a,n){return r("b-list-group-item",{key:"gnd_"+t.id+n,class:{highlighted:n===t[s].persName[i].gnd.highlighted},attrs:{button:""},on:{mousedown:function(r){e.selectGnd(s,t.id,i,a)},mouseenter:function(e){t[s].persName[i].gnd.highlighted=n}}},[e._v("\n                            "+e._s(a.label)+"\n                        ")])}),e._v(" "),t[s].persName[i].gnd.suggestions.length>9?r("b-list-group-item",{key:"gndMore",staticClass:"bg-secondary text-white",attrs:{button:""},on:{mousedown:function(r){e.getMoreGnd(s,t.id,i)}}},[e._v("\n                            "+e._s(e.label.more)+"\n                        ")]):e._e(),e._v(" "),0===t[s].persName[i].gnd.suggestions.length?r("b-list-group-item",{key:"gndNoMatches",attrs:{button:""}},[e._v("\n                            "+e._s(e.label.gndNoMatches)+"\n                        ")]):e._e()],2):e._e(),e._v(" "),r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"Organisation"+t.id+i,value:"true","unchecked-value":"false"},on:{input:function(r){e.addOrg(s,t.id,i)}},model:{value:a.organisation,callback:function(t){e.$set(a,"organisation",t)},expression:"s.organisation"}},[e._v(e._s(e.label.org))])],1)],1)}),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(r){e.addPerson(s,t.id)}}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label["add"+s.charAt(0).toUpperCase()+s.slice(1)])+"\n                  ")]),e._v(" "),e._l(t[s].placeName,function(a,i){return r("b-card",{key:"pl_"+t.id+i,staticClass:"mb-2",attrs:{"no-body":""}},[r("b-card-header",[r("b-row",{attrs:{"align-h":"between"}},[r("b-col",{attrs:{cols:"2"}},[t[s].placeName.length>1?r("b-button",{attrs:{size:"sm"},on:{click:function(r){e.rmPlace(s,t.id,i)}}},[r("i",{staticClass:"fa fa-trash-alt"})]):e._e()],1),e._v(" "),r("b-col",{staticClass:"text-right"},[r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"PlaceConjecture"+t.id+i,disabled:""===a.text,value:"true","unchecked-value":"false"},model:{value:a.conjecture,callback:function(t){e.$set(a,"conjecture",t)},expression:"place.conjecture"}},[e._v(e._s(e.label.conjecture))]),e._v(" "),r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"PlaceUncertain"+t.id+i,disabled:""===a.text,value:"true","unchecked-value":"false"},model:{value:a.uncertain,callback:function(t){e.$set(a,"uncertain",t)},expression:"place.uncertain"}},[e._v(e._s(e.label.uncertain))])],1)],1)],1),e._v(" "),r("b-card-body",[r("b-form-group",{staticClass:"labelOnTop",attrs:{"label-size":"sm",label:e.label.place,"label-for":s+"Place"+t.id+i}},[r("b-form-input",{attrs:{id:s+"Place"+t.id+i,size:"sm"},nativeOn:{blur:function(r){e.addPlaceToPool(s,t.id,i)},keyup:function(r){e.onInput(s,t.id,i,!0)},keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;a.open=!1},function(r){if(!("button"in r)&&e._k(r.keyCode,"down",40,r.key,["Down","ArrowDown"]))return null;e.moveDown(s,t.id,i,!0)},function(r){if(!("button"in r)&&e._k(r.keyCode,"up",38,r.key,["Up","ArrowUp"]))return null;e.moveUp(s,t.id,i,!0)},function(r){if(!("button"in r)&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.select(s,t.id,i,!0)}]},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"place.text"}})],1),e._v(" "),a.open&&a.text.length>2?r("b-list-group",e._l(e.filterNames(s,t.id,i,!0),function(n,l){return r("b-list-group-item",{key:"psp_"+t.id+l,class:{highlighted:l===a.highlighted},attrs:{button:""},on:{mousedown:function(r){e.select(s,t.id,i,!0)},mouseenter:function(e){a.highlighted=l}}},[e._v("\n                            "+e._s(n)+"\n                        ")])})):e._e(),e._v(" "),r("b-form-group",{staticClass:"labelOnTop",attrs:{"label-size":"sm",label:e.label.placeAuthority,"label-for":s+"PlaceID"+t.id+i}},[r("b-input-group",[r("b-form-input",{ref:s+"PlaceID"+t.id+i,refInFor:!0,staticClass:"no-right-border",attrs:{id:s+"PlaceID"+t.id+i,state:e.state[t.id][s+"Place"][i].id,size:"sm"},nativeOn:{blur:function(r){e.addPlaceNorm(s,t.id,i),a.geo.open=!1,e.state[t.id][s+"Place"][i].id=e.setState(s+"PlaceAuthority",t.id,i)},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;a.geo.open=!1}},model:{value:a.ref,callback:function(t){e.$set(a,"ref",t)},expression:"place.ref"}}),e._v(" "),r("b-input-group-append",[r("b-form-select",{attrs:{size:"sm",disabled:""===a.text},model:{value:a.geo.parameter,callback:function(t){e.$set(a.geo,"parameter",t)},expression:"place.geo.parameter"}},[r("option",{attrs:{value:"P"}},[e._v(e._s(e.label.geodataP))]),e._v(" "),r("option",{attrs:{value:"T"}},[e._v(e._s(e.label.geodataT))]),e._v(" "),r("option",{attrs:{value:"S"}},[e._v(e._s(e.label.geodataS))])]),e._v(" "),r("b-btn",{staticClass:"text-white",attrs:{variant:"secondary",disabled:""===a.text},on:{click:function(r){e.getGeodata(s,t.id,i)}}},[r("i",{staticClass:"fa fa-globe"})])],1),e._v(" "),r("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.label.errorGeoNames))])],1)],1),e._v(" "),a.geo.open?r("b-list-group",e._l(a.geo.suggestions,function(n,l){return r("b-list-group-item",{key:"geo_"+t.id+l,class:{highlighted:l===a.geo.highlighted},attrs:{button:""},on:{mousedown:function(r){e.selectGeoname(s,t.id,i,n)},mouseenter:function(e){a.geo.highlighted=l}}},[e._v("\n                            "+e._s(n.name)+", "+e._s(n.adminName1)+" ("+e._s(n.countryCode)+")\n                        ")])})):e._e()],1)],1)}),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(r){e.addPlace(s,t.id)}}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label.addPlace)+"\n                  ")]),e._v(" "),r("b-card",{attrs:{"no-body":""}},[r("b-card-header",[r("b-row",[r("b-col",{attrs:{cols:"nba"===t[s].date||"na"===t[s].date||""===t[s].date?"12":"5"}},[r("b-form-select",{attrs:{size:"sm"},model:{value:t[s].date,callback:function(r){e.$set(t[s],"date",r)},expression:"item[type].date"}},[r("option",{attrs:{value:""}},[e._v(e._s(e.label.dateForm))]),e._v(" "),r("option",{attrs:{value:"when"}},[e._v(e._s(e.label.dateWhen))]),e._v(" "),r("option",{attrs:{value:"nba"}},[e._v(e._s(e.label.dateNba))]),e._v(" "),r("option",{attrs:{value:"span"}},[e._v(e._s(e.label.dateSpan))]),e._v(" "),r("option",{attrs:{value:"na"}},[e._v(e._s(e.label.noDate))])])],1),e._v(" "),"nba"!==t[s].date&&"na"!==t[s].date&&""!==t[s].date?r("b-col",{staticClass:"text-right",attrs:{cols:"nba"===t[s].date||"na"===t[s].date||""===t[s].date?"0":"7"}},[r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"DateUncertain"+t.id,value:"true","unchecked-value":"false"},model:{value:t[s].dateCert.uncertain,callback:function(r){e.$set(t[s].dateCert,"uncertain",r)},expression:"item[type].dateCert.uncertain"}},[e._v(e._s(e.label.conjecture))]),e._v(" "),r("b-form-checkbox",{staticClass:"labelOnTop",attrs:{id:s+"DateConjecture"+t.id,value:"true","unchecked-value":"false"},model:{value:t[s].dateCert.conjecture,callback:function(r){e.$set(t[s].dateCert,"conjecture",r)},expression:"item[type].dateCert.conjecture"}},[e._v(e._s(e.label.uncertain))])],1):e._e()],1)],1),e._v(" "),r("b-card-body",[r("b-alert",{attrs:{variant:"warning",show:""===t[s].date,size:"sm"}},[e._v("\n                      "+e._s(e.label.selectDateForm)+"\n                      ")]),e._v(" "),"when"===t[s].date?r("b-form-group",{staticClass:"labelOnTop",attrs:{description:"YYYY-MM-DD","invalid-feedback":e.label.errorDate}},[r("b-form-input",{attrs:{size:"sm",id:s+"DateWhen"+t.id,state:e.state[t.id][s+"Date"].when},nativeOn:{blur:function(r){e.state[t.id][s+"Date"].when=e.setState("when"+s.charAt(0).toUpperCase()+s.slice(1),t.id)}},model:{value:t[s].when,callback:function(r){e.$set(t[s],"when",r)},expression:"item[type].when"}})],1):e._e(),e._v(" "),"nba"===t[s].date?r("b-form-group",{staticClass:"labelOnTop",attrs:{description:"YYYY-MM-DD",label:e.label.dateNb,"label-for":s+"DateNb"+t.id,"invalid-feedback":e.label.errorDate}},[r("b-form-input",{attrs:{size:"sm",id:s+"DateNb"+t.id,state:e.state[t.id][s+"Date"].notBefore},nativeOn:{blur:function(r){e.state[t.id][s+"Date"].notBefore=e.setState("notBefore"+s.charAt(0).toUpperCase()+s.slice(1),t.id)}},model:{value:t[s].notBefore,callback:function(r){e.$set(t[s],"notBefore",r)},expression:"item[type].notBefore"}})],1):e._e(),e._v(" "),"nba"===t[s].date?r("b-form-group",{staticClass:"labelOnTop",attrs:{description:"YYYY-MM-DD",label:e.label.dateNa,"label-for":s+"DateNa"+t.id,"invalid-feedback":e.label.errorDate}},[r("b-form-input",{attrs:{size:"sm",id:s+"DateNa"+t.id,state:e.state[t.id][s+"Date"].notAfter},nativeOn:{blur:function(r){e.state[t.id][s+"Date"].notAfter=e.setState("notAfter"+s.charAt(0).toUpperCase()+s.slice(1),t.id)}},model:{value:t[s].notAfter,callback:function(r){e.$set(t[s],"notAfter",r)},expression:"item[type].notAfter"}})],1):e._e(),e._v(" "),"span"===t[s].date?r("b-form-group",{staticClass:"labelOnTop",attrs:{description:"YYYY-MM-DD",label:e.label.from,"label-for":s+"DateFrom"+t.id,"invalid-feedback":e.label.errorDate}},[r("b-form-input",{attrs:{size:"sm",id:s+"DateFrom"+t.id,state:e.state[t.id][s+"Date"].from},nativeOn:{blur:function(r){e.state[t.id][s+"Date"].from=e.setState("spanFrom"+s.charAt(0).toUpperCase()+s.slice(1),t.id)}},model:{value:t[s].spanFrom,callback:function(r){e.$set(t[s],"spanFrom",r)},expression:"item[type].spanFrom"}})],1):e._e(),e._v(" "),"span"===t[s].date?r("b-form-group",{staticClass:"labelOnTop",attrs:{description:"YYYY-MM-DD",label:e.label.to,"label-for":s+"DateTo"+t.id,"invalid-feedback":e.label.errorDate}},[r("b-form-input",{attrs:{size:"sm",id:s+"DateTo"+t.id,state:e.state[t.id][s+"Date"].to},nativeOn:{blur:function(r){e.state[t.id][s+"Date"].to=e.setState("spanTo"+s.charAt(0).toUpperCase()+s.slice(1),t.id)}},model:{value:t[s].spanTo,callback:function(r){e.$set(t[s],"spanTo",r)},expression:"item[type].spanTo"}})],1):e._e(),e._v(" "),r("b-button",{staticClass:"mb-1",attrs:{size:"sm"},on:{click:function(e){t[s].dateAsTextHidden=!t[s].dateAsTextHidden}}},[r("i",{staticClass:"fa",class:t[s].dateAsTextHidden?"fa-angle-down":"fa-angle-up"}),e._v(" "+e._s(e.label.dateText)+"\n                      ")]),e._v(" "),t[s].dateAsTextHidden?e._e():r("b-form-input",{attrs:{size:"sm",id:s+"DateText"+t.id},model:{value:t[s].dateAsText,callback:function(r){e.$set(t[s],"dateAsText",r)},expression:"item[type].dateAsText"}})],1)],1)],2)}))],1)],1)],1)}))],1),e._v(" "),r("b-row",{staticClass:"mt-2"},[r("b-col",[r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:e.addCorrespDescItem}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label.addCdItem)+"\n        ")])],1),e._v(" "),r("b-col",[r("b-pagination",{staticClass:"mb-0",attrs:{align:"center",size:"sm","total-rows":e.filteredCorrespDesc.results.length,"per-page":10},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),e._v(" "),r("b-col")],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},gDWM:function(e,t,r){"use strict";var s=r("pFYg"),a=r.n(s);t.a={name:"start",props:{labels:{type:Object},pArrays:{type:Object,twoWays:!0}},data:function(){return{file:"",label:this.labels,persons:this.pArrays.persons,places:this.pArrays.places,beginAnew:!1,state:{bibl:this.biblState,correspDesc:this.correpsDesc},error:!1,errorMsg:""}},methods:{startNew:function(){this.$parent.metaData={title:"",editor:[{name:"",email:""}],publisher:[{name:"",url:""}],url:"",licence:""},this.$parent.biblData=[{id:0,uuid:"",type:null,url:"",text:"",selected:""}],this.$parent.correspDescData=[{id:0,visible:!1,header:"",ref:"",refHidden:!0,key:"",bibl:0,sender:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0},receiver:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0}}],this.$parent.correspDescState=[{urlToXml:null,sender:[{name:null,id:null}],receiver:[{name:null,id:null}],senderPlace:[{name:null,id:null}],receiverPlace:[{name:null,id:null}],senderDate:{when:null,notBefore:null,notAfter:null,from:null,to:null},receiverDate:{when:null,notBefore:null,notAfter:null,from:null,to:null}}],this.$parent.metaState={title:null,editor:[{name:null,email:null}],publisher:[{name:null,url:null}],url:null,licence:null},this.$parent.biblState=[{type:null,text:null,url:null}]},load:function(){var e=this;this.$parent.correspDescData.length>1&&this.startNew(),this.error&&(this.error=!1);var t=new FileReader;t.onload=function(){if("xml"===e.file.name.split(".").pop()){var r=new XMLHttpRequest;r.open("POST","https://correspSearch.net/api/v1.1/converter/xml2json.xql",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onload=function(){if(200===r.status){var t=JSON.parse(r.responseText);e.loadJsonToFileDesc(t.teiHeader.fileDesc),e.loadJsonToBibl(t.teiHeader.fileDesc.sourceDesc.bibl),e.loadJsonToCorrespDesc(t.teiHeader.profileDesc.correspDesc),e.error||e.$parent.navigate("meta")}else console.error(r.responseText)},r.send("xml-data="+t.result)}else{var s=JSON.parse(t.result);e.loadJsonToFileDesc(s.teiHeader.fileDesc),e.loadJsonToBibl(s.teiHeader.fileDesc.sourceDesc.bibl),e.loadJsonToCorrespDesc(s.teiHeader.profileDesc.correspDesc),e.error||e.$parent.navigate("meta")}},t.readAsText(this.file)},loadJsonToFileDesc:function(e){var t=this;this.$parent.metaData.title=e&&e.titleStmt&&e.titleStmt.title?e.titleStmt.title:"",this.$parent.metaState.title=""!==this.$parent.metaData.title,this.$parent.metaData.editor=[],this.$parent.metaState.editor=[],e.titleStmt&&e.titleStmt.editor?Array.isArray(e.titleStmt.editor)?e.titleStmt.editor.forEach(function(e){t.$parent.metaState.editor.push({name:""!==e["#text"],email:""!==e.email&&t.$parent.check("email",e.email)}),t.$parent.metaData.editor.push({name:e["#text"],email:e.email})}):(this.$parent.metaState.editor.push({name:void 0!==e.titleStmt.editor["#text"]&&""!==e.titleStmt.editor["#text"],email:void 0!==e.titleStmt.editor.email&&""!==e.titleStmt.editor.email&&this.$parent.check("email",e.titleStmt.editor.email)}),this.$parent.metaData.editor.push({name:e.titleStmt.editor["#text"],email:e.titleStmt.editor.email})):(this.$parent.metaState.editor.push({name:!1,email:!1}),this.$parent.metaData.editor.push({name:"",email:""})),this.$parent.metaData.publisher=[],this.$parent.metaState.publisher=[],e&&e.publicationStmt&&e.publicationStmt.publisher?Array.isArray(e.publicationStmt.publisher)?e.publicationStmt.publisher.forEach(function(e){t.$parent.metaState.publisher.push({name:void 0!==e.ref["#text"]&&""!==e.ref["#text"],url:void 0!==e.ref.target&&""!==e.ref.target&&t.$parent.check("url",e.ref.target)}),t.$parent.metaData.publisher.push({name:e.ref?e.ref["#text"]:"",url:e.ref?e.ref.target:""})}):(this.$parent.metaState.publisher.push({name:void 0!==e.publicationStmt.publisher.ref["#text"]&&""!==e.publicationStmt.publisher.ref["#text"],url:void 0!==e.publicationStmt.publisher.ref.target&&""!==e.publicationStmt.publisher.ref.target&&this.$parent.check("url",e.publicationStmt.publisher.ref.target)}),this.$parent.metaData.publisher.push({name:e.publicationStmt.publisher.ref["#text"],url:e.publicationStmt.publisher.ref.target})):(this.$parent.metaState.publisher.push({name:!1,url:!1}),this.$parent.metaData.publisher.push({name:"",url:""})),this.$parent.metaData.url=e.publicationStmt.idno?e.publicationStmt.idno["#text"]:"",this.$parent.metaState.url=""===this.$parent.metaData.url?null:this.$parent.check("url",this.$parent.metaData.url),this.$parent.metaData.date=e.publicationStmt.date?e.publicationStmt.date.when:"",this.$parent.metaData.licence=e.publicationStmt.availability?e.publicationStmt.availability.licence["#text"]:"",this.$parent.metaState.licence=void 0!==this.$parent.metaData.licence&&""!==this.$parent.metaData.licence},loadJsonToBibl:function(e){this.$parent.biblData=[],this.$parent.biblState=[];for(var t=0;t<e.length;t+=1)this.$parent.biblState.push({type:void 0!==e[t].type&&""!==e[t].type,text:void 0!==e[t]["#text"]&&""!==e[t]["#text"],url:"print"===e[t].type&&""===e[t].ref?null:void 0!==e[t].ref&&this.$parent.check("url",e[t].ref.target)}),this.$parent.biblData.push({id:t,uuid:void 0===e[t]["xml:id"]?"":e[t]["xml:id"],type:void 0===e[t].type?"":e[t].type,url:void 0===e[t].ref?"":e[t].ref.target,text:void 0===e[t]["#text"]?"":e[t]["#text"],selected:!1})},loadJsonToCorrespDesc:function(e){var t=this;this.$parent.correspDescData=[],this.$parent.correspDescState=[];for(var r=0;r<e.length;r+=1)!function(r){try{var s={sender:"",receiver:""};["sender","receiver"].forEach(function(t){var a="sender"===t?0:1;e[r]&&e[r].correspAction&&e[r].correspAction[a]&&e[r].correspAction[a].date?e[r].correspAction[a].date.when?s[t]="when":e[r].correspAction[a].date.notBefore?s[t]="nba":e[r].correspAction[a].date.from?s[t]="span":s[t]="na":s[t]="na"});var i={sender:[],receiver:[]};["sender","receiver"].forEach(function(t){var s="sender"===t?0:1;["orgName","persName"].forEach(function(n){e[r]&&e[r].correspAction&&e[r].correspAction[s]&&("object"===a()(e[r].correspAction[s][n])?e[r].correspAction[s][n]["#text"]?i[t].push({text:e[r].correspAction[s][n]["#text"],ref:e[r].correspAction[s][n].ref,conjecture:"conjecture"===e[r].correspAction[s][n].evidence,uncertain:"low"===e[r].correspAction[s][n].cert,organisation:"orgName"===n,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}):e[r].correspAction[s][n].forEach(function(a){i[t].push({text:"string"==typeof a?a:a["#text"],ref:"string"==typeof a?"":a.ref,conjecture:e[r].correspAction[s][n][a]&&"conjecture"===e[r].correspAction[s][n][a].evidence,uncertain:e[r].correspAction[s][n][a]&&"low"===e[r].correspAction[s][n][a].cert,organisation:"orgName"===n,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}})}):"string"!=typeof e[r].correspAction[s][n]&&""!==e[r].correspAction[s][n]||i[t].push({text:e[r].correspAction[s][n],ref:"",conjecture:!1,uncertain:!1,organisation:"orgName"===n,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}))}),void 0===e[r].correspAction[s].persName&&void 0===e[r].correspAction[s].orgName&&i[t].push({text:"",ref:"",conjecture:!1,uncertain:!1,organisation:"",open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}})});var n={sender:[],receiver:[]};["sender","receiver"].forEach(function(e){for(var r=0;r<i[e].length;r+=1){var s=!1;if(0===t.persons.length)t.persons.push({text:i[e][r].text,ref:i[e][r].ref,org:i[e][r].organisation});else{for(var a=0;a<t.persons.length&&!(s=i[e][r].text===t.persons[a].text);a+=1);s||t.persons.push({text:i[e][r].text,ref:i[e][r].ref,org:i[e][r].organisation})}n[e].push({name:""!==t.persons[t.persons.length-1].text&&void 0!==t.persons[t.persons.length-1].text,id:""===t.persons[t.persons.length-1].ref||void 0===t.persons[t.persons.length-1].ref?null:t.$parent.check("person",t.persons[t.persons.length-1].ref)})}});var l={sender:[],receiver:[]};["sender","receiver"].forEach(function(t){var s="sender"===t?0:1;e[r]&&e[r].correspAction&&e[r].correspAction[s]&&("object"===a()(e[r].correspAction[s].placeName)?e[r].correspAction[s].placeName["#text"]?l[t].push({text:e[r].correspAction[s].placeName["#text"],ref:e[r].correspAction[s].placeName.ref,conjecture:"conjecture"===e[r].correspAction[s].placeName.evidence,uncertain:"low"===e[r].correspAction[s].placeName.cert,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}}):e[r].correspAction[s].placeName.forEach(function(e){l[t].push({text:"string"==typeof e?e:e["#text"],ref:"string"==typeof e?"":e.ref,conjecture:"conjecture"===e.evidence,uncertain:"low"===e.cert,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}})}):"string"!=typeof e[r].correspAction[s].placeName&&""!==e[r].correspAction[s].placeName||l[t].push({text:e[r].correspAction[s].placeName,ref:"",conjecture:"conjecture"===e[r].correspAction[s].placeName.evidence,uncertain:"low"===e[r].correspAction[s].placeName.cert,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}})),void 0===e[r].correspAction[s].placeName&&l[t].push({text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:!1,suggestions:[],all:0,parameter:"P"}})});var o={sender:[],receiver:[]};["sender","receiver"].forEach(function(e){var r=!1;l[e]&&l[e].forEach(function(s){if(0===t.places.length)t.places.push({text:s.text,ref:s.ref});else{for(var a=0;a<t.places.length&&!(r=s.text===t.places[a].text);a+=1);r||t.places.push({text:s.text,ref:s.ref})}o[e].push({name:s.text,id:""===s.ref?null:t.$parent.check("place",s.ref)})})});var c="";c=e[r].key?'<span class="badge badge-info mr-1">'+e[r].key+"</span>":"",c+=i.sender[0].text?'<span class="badge badge-secondary mr-1">'+t.label.headBy+'</span><small class="mr-2 ml-1">'+i.sender[0].text+"</small>":"",c+=i.receiver[0].text?'<span class="badge badge-secondary mr-1">'+t.label.headTo+'</span><small class="mr-2 ml-1">'+i.receiver[0].text+"</small>":"",t.$parent.correspDescState.push({urlToXml:e[r]&&e[r].ref?t.$parent.check("url",e[r].ref):null,sender:n.sender,receiver:n.receiver,senderPlace:o.sender,receiverPlace:o.receiver,senderDate:{when:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.when?t.$parent.check("date",e[r].correspAction[0].date.when):null,notBefore:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.notBefore?t.$parent.check("date",e[r].correspAction[0].date.notBefore):null,notAfter:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.notAfter?t.$parent.check("date",e[r].correspAction[0].date.notAfter):null,from:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.from?t.$parent.check("date",e[r].correspAction[0].date.from):null,to:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.to?t.$parent.check("date",e[r].correspAction[0].date.to):null},receiverDate:{when:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.when?t.$parent.check("date",e[r].correspAction[1].date.when):null,notBefore:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.notBefore?t.$parent.check("date",e[r].correspAction[1].date.notBefore):null,notAfter:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.notAfter?t.$parent.check("date",e[r].correspAction[1].date.notAfter):null,from:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.from?t.$parent.check("date",e[r].correspAction[1].date.from):null,to:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.to?t.$parent.check("date",e[r].correspAction[1].date.to):null}}),t.$parent.correspDescData.push({id:r,visible:!1,header:c,ref:e[r]&&e[r].ref?e[r].ref:"",refHidden:!(e[r]&&e[r].ref),key:e[r]?e[r].key:"",bibl:t.getRealBibId(e[r].source.replace("#","")),sender:{persName:i.sender,placeName:l.sender,date:s.sender,dateCert:{conjecture:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&"conjecture"===e[r].correspAction[0].date.evidence,uncertain:e[r]&&e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&"low"===e[r].correspAction[0].date.cert},when:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.when?e[r].correspAction[0].date.when:"",notBefore:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.notBefore?e[r].correspAction[0].date.notBefore:"",notAfter:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.notAfter?e[r].correspAction[0].date.notAfter:"",spanFrom:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.from?e[r].correspAction[0].date.from:"",spanTo:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date.to?e[r].correspAction[0].date.to:"",dateAsText:e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date["#text"]?e[r].correspAction[0].date["#text"]:"",dateAsTextHidden:!(e[r].correspAction&&e[r].correspAction[0]&&e[r].correspAction[0].date&&e[r].correspAction[0].date["#text"])},receiver:{persName:i.receiver,placeName:l.receiver,date:s.receiver,dateCert:{conjecture:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&"conjecture"===e[r].correspAction[1].date.evidence,uncertain:e[r]&&e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&"low"===e[r].correspAction[1].date.cert},when:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.when?e[r].correspAction[1].date.when:"",notBefore:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.notBefore?e[r].correspAction[1].date.notBefore:"",notAfter:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.notAfter?e[r].correspAction[1].date.notAfter:"",spanFrom:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.from?e[r].correspAction[1].date.from:"",spanTo:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date.to?e[r].correspAction[1].date.to:"",dateAsText:e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date["#text"]?e[r].correspAction[1].date["#text"]:"",dateAsTextHidden:!(e[r].correspAction&&e[r].correspAction[1]&&e[r].correspAction[1].date&&e[r].correspAction[1].date["#text"])}})}catch(s){t.error=!0,t.errorMsg=""+t.label["alertLoadError"+(e[r].key?"Key":"Id")]+(e[r].key?e[r].key:r)+"."}}(r)},getRealBibId:function(e){for(var t="",r=0;r<this.$parent.biblData.length;r+=1){t=this.$parent.biblData[r].uuid===e?r:0;break}return t}}}},jgSm:function(e,t){},"kQ+j":function(e,t,r){"use strict";var s=r("Pz0K"),a=r("cYMH"),i=r("VU/8"),n=i(s.a,a.a,!1,null,null,null);t.a=n.exports},kiOB:function(e,t,r){"use strict";var s=r("Pjk3"),a=r("Y+wC"),i=r("VU/8"),n=i(s.a,a.a,!1,null,null,null);t.a=n.exports},o3sn:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.isInternetExplorer?e._e():r("b-nav",{staticClass:"ml-0",attrs:{tabs:""}},[r("b-nav-item",{attrs:{active:"start"===e.nav},on:{click:function(t){e.nav="start"}}},[e._v(e._s(e.labels.start))]),e._v(" "),r("b-nav-item",{attrs:{active:"meta"===e.nav},on:{click:function(t){e.nav="meta"}}},[e._v(e._s(e.labels.step1))]),e._v(" "),r("b-nav-item",{attrs:{active:"bibl"===e.nav},on:{click:function(t){e.nav="bibl"}}},[e._v(e._s(e.labels.step2))]),e._v(" "),r("b-nav-item",{attrs:{active:"correspDesc"===e.nav},on:{click:function(t){e.nav="correspDesc"}}},[e._v(e._s(e.labels.step3))]),e._v(" "),r("b-nav-item",{attrs:{active:"save"===e.nav},on:{click:function(t){e.nav="save"}}},[e._v(e._s(e.labels.step4))])],1),e._v(" "),e.isInternetExplorer?e._e():r("div",{staticClass:"container pt-5 pb-5 bg-white"},["start"===e.nav?r("start",{attrs:{labels:e.labels,pArrays:e.pArrays}}):e._e(),e._v(" "),"meta"===e.nav?r("metaData",{attrs:{labels:e.labels,metaData:e.metaData,metaState:e.metaState}}):e._e(),e._v(" "),"bibl"===e.nav?r("biblData",{attrs:{labels:e.labels,biblData:e.biblData,biblState:e.biblState}}):e._e(),e._v(" "),"correspDesc"===e.nav?r("correspDescData",{attrs:{labels:e.labels,correspDescData:e.correspDescData,pArrays:e.pArrays,filterSpecs:e.filter,correspDescState:e.correspDescState}}):e._e(),e._v(" "),"save"===e.nav?r("save",{attrs:{labels:e.labels,metaData:e.metaData,biblData:e.biblData,correspDescData:e.correspDescData}}):e._e()],1),e._v(" "),e.isInternetExplorer?r("b-alert",{attrs:{variant:"warning",show:""}},[e._v("\n    "+e._s(e.ieAlert[e.lang])+"\n  ")]):e._e()],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},pYvg:function(e,t){},qFte:function(e,t,r){"use strict";var s=r("fZjL"),a=r.n(s),i=r("pFYg"),n=r.n(i),l=r("W3Iv"),o=r.n(l),c=r("mvHQ"),p=r.n(c);t.a={name:"save",props:{labels:{type:Object,default:function(){return{}}},metaData:{type:Object},biblData:{type:Array},correspDescData:{type:Array}},data:function(){return{label:this.labels,meta:this.metaData,bibl:this.biblData,correspDesc:this.correspDescData,downloadLink:{json:"",xml:""},downloadFileName:{json:"",xml:""},downloadType:"xml",validationResults:{meta:!1,bibl:!1,correspDesc:!1},metaFails:[],biblFails:[],correspDescFails:[],errorNoIds:{pers:!1,place:!1}}},methods:{validate:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={meta:!1,bibl:!1,correspDesc:!1};switch(e){case"meta":var a=[],i=!0;""===this.meta.title&&(a.push(this.label.title+": "+this.label.errorMetaTitle),i=!1),this.meta.editor.forEach(function(e,r){""===e.name&&(i=!1,a.push(t.label.editor+" "+(r+1)+": "+t.label.errorMetaEditor)),t.$parent.check("email",e.email)||(i=!1,""!==e.email?a.push(t.label.editor+" "+(r+1)+": "+t.label.errorMetaEmailFormat):a.push(t.label.editor+" "+(r+1)+": "+t.label.errorMetaEmailEmpty))}),this.meta.publisher.forEach(function(e,r){""===e.name&&(i=!1,a.push(t.label.publisher+" "+(r+1)+": "+t.label.errorMetaPublisher)),""===e.url||t.$parent.check("url",e.url)||(i=!1,a.push(t.label.publisher+" "+(r+1)+": "+t.label.errorURLFormat))}),""===this.meta.url||this.$parent.check("url",this.meta.url)||(i=!1,a.push(this.label.urlToXml+": "+this.label.errorURLFormat)),""===this.meta.licence&&(a.push(this.label.licence+": "+this.label.errorMetaLicence),i=!1),s.meta=i,r&&(this.metaFails=a);break;case"bibl":var n=[],l=!0;if(this.bibl.length>0){for(var o=0;o<this.bibl.length;o+=1)null===this.bibl[o].type&&(this.bibl.length>1?n.push(this.label.bibInfo+" "+(o+1)+", "+this.label.bibType+": "+this.label.errorBiblType):n.push(this.label.bibType+": "+this.label.errorBiblType),l=!1),""===this.bibl[o].text&&(this.bibl.length>1?n.push(this.label.bibInfo+" "+(o+1)+", "+this.label.bibTitle+": "+this.label.errorBibl):n.push(this.label.bibTitle+": "+this.label.errorBibl),l=!1),""===this.bibl[o].url||this.$parent.check("url",this.bibl[o].url)||"online"!==this.bibl[o].type&&"hybrid"!==this.bibl[o].type||(this.bibl.length>1?n.push(this.label.bibInfo+" "+(o+1)+", "+this.label.bibUrl+": "+this.label.errorURLFormat):n.push(this.label.bibUrl+": "+this.label.errorURLFormat),l=!1);r&&(this.biblFails=n),s.bibl=l}break;case"correspDesc":for(var c=!0,p=!1,u=!1,d=0;d<this.correspDesc.length;d+=1)!function(e){var s=!0,a={id:t.correspDesc[e].id,key:t.correspDesc[e].key,sender:t.correspDesc[e].sender.persName[0].text,receiver:t.correspDesc[e].receiver.persName[0].text,fields:[]};if(""===t.correspDesc[e].ref||t.$parent.check("url",t.correspDesc[e].ref)||(c=!1,s=!1,a.fields.push(t.labels.reflink+": "+t.labels.errorURLFormat)),["sender","receiver"].forEach(function(r){for(var i=0;i<t.correspDesc[e][r].persName.length;i+=1)""===t.correspDesc[e][r].persName[i].text&&(c=!1,s=!1,a.fields.push(t.labels[r]+" "+(i+1)+", "+t.labels[r]+": "+t.labels.errorName)),""===t.correspDesc[e][r].persName[i].ref||void 0===t.correspDesc[e][r].persName[i].ref||t.$parent.check("person",t.correspDesc[e][r].persName[i].ref)||(c=!1,s=!1,a.fields.push(t.labels[r]+" "+(i+1)+", "+t.labels[r+"Authority"]+": "+t.labels.errorAuthorityID)),""!==t.correspDesc[e][r].persName[i].ref&&(p=!0);for(var n=0;n<t.correspDesc[e][r].placeName.length;n+=1)""===t.correspDesc[e][r].placeName[n].ref||void 0===t.correspDesc[e][r].placeName[n].ref||t.$parent.check("place",t.correspDesc[e][r].placeName[n].ref)||(c=!1,s=!1,a.fields.push(t.labels[r]+" "+(n+1)+", "+t.labels.placeAuthority+": "+t.labels.errorGeoNames)),""!==t.correspDesc[e][r].placeName[n].ref&&(u=!0);"when"!==t.correspDesc[e][r].date||""===t.correspDesc[e][r].when||t.$parent.check("date",t.correspDesc[e][r].when)||(c=!1,s=!1,a.fields.push(t.labels[r]+", "+t.labels.dateWhen+": "+t.labels.errorDate)),"nba"===t.correspDesc[e][r].date&&(""!==t.correspDesc[e][r].notBefore&&!t.$parent.check("date",t.correspDesc[e][r].notBefore)||""!==t.correspDesc[e][r].notAfter&&!t.$parent.check("date",t.correspDesc[e][r].notAfter))&&(c=!1,s=!1,a.fields.push(t.labels[r]+", "+t.labels.dateNba+": "+t.labels.errorDate)),"span"!==t.correspDesc[e][r].date||""===t.correspDesc[e][r].spanFrom&&""===t.correspDesc[e][r].spanTo||t.$parent.check("date",t.correspDesc[e][r].spanFrom)&&t.$parent.check("date",t.correspDesc[e][r].spanTo)||(c=!1,s=!1,a.fields.push(t.labels[r]+", "+t.labels.dateSpan+": "+t.labels.errorDate))}),!s&&r){for(var i=!1,n=0;n<t.correspDescFails.length;n+=1)if(t.correspDescFails[n].id===t.correspDesc[e].id){i=!0;break}i||t.correspDescFails.push(a)}}(d);p||(c=!1,this.errorNoIds.pers=!0),u||(c=!1,this.errorNoIds.place=!0),s.correspDesc=c;break;default:s={meta:!1,bibl:!1,correspDesc:!1}}return s[e]},goToInvalidLetter:function(e,t){t?this.$parent.navigate("correspDesc",["key",t]):this.$parent.navigate("correspDesc",["id",e])},prepare:function(){var e=this,t={teiHeader:{fileDesc:{titleStmt:{title:null,editor:[{"#text":null,email:null}]},publicationStmt:{publisher:[{ref:{target:null,"#text":null}}],idno:{type:null,"#text":null},date:{when:null},availability:{licence:{target:null,"#text":null}}},sourceDesc:{bibl:[]}},profileDesc:{correspDesc:[]}}},r=new Date,s=r.getTimezoneOffset()/60,a="";s>-10&&s<10?(a=String(s),a=a.includes("-")?a.replace("-","-0"):a="0"+a):a=String(s);var i=r.getFullYear()+"-";i+=("0"+(r.getMonth()+1)).slice(-2)+"-",i+=("0"+(r.getDate()+1)).slice(-2)+"T",i+=("0"+(r.getHours()+1)).slice(-2)+":",i+=("0"+(r.getMinutes()+1)).slice(-2)+":",i+=("0"+(r.getSeconds()+1)).slice(-2)+".",i+=r.getMilliseconds(),i+=a+":00";var n=[];this.meta.editor.forEach(function(e){n.push({"#text":e.name,email:e.email})}),t.teiHeader.fileDesc.titleStmt={title:this.meta.title,editor:n};var l=[];this.meta.publisher.forEach(function(e){l.push({ref:{"#text":e.name,target:e.url}})}),t.teiHeader.fileDesc.publicationStmt={publisher:l,idno:{type:this.meta.url?"url":null,"#text":this.meta.url},availability:{licence:{"#text":"CC0"===this.meta.licence||"CC-BY 4.0"===this.meta.licence?this.meta.licence:null,target:"https://creativecommons.org/licenses/by/"+this.meta.licence.match(/[0-9]\.[0-9]/g)+"/"}},date:{when:i}};for(var o=0;o<this.bibl.length;o+=1)t.teiHeader.fileDesc.sourceDesc.bibl.push({"xml:id":this.bibl[o].uuid,type:this.bibl[o].type,"#text":this.bibl[o].text,ref:{target:this.bibl[o].url,"#text":this.bibl[o].url}});for(var c=0;c<this.correspDesc.length;c+=1)!function(r){var s={sender:[],receiver:[]},a={sender:[],receiver:[]},i={sender:[],receiver:[]};["sender","receiver"].forEach(function(t){for(var i=0;i<e.correspDesc[r][t].persName.length;i+=1)e.correspDesc[r][t].persName[i].organisation?a[t].push({"#text":e.correspDesc[r][t].persName[i].text?e.correspDesc[r][t].persName[i].text:"Unknown",ref:e.correspDesc[r][t].persName[i].ref,evidence:"true"===e.correspDesc[r][t].persName[i].conjecture?"conjecture":null,cert:"true"===e.correspDesc[r][t].persName[i].uncertain?"low":null}):s[t].push({"#text":e.correspDesc[r][t].persName[i].text?e.correspDesc[r][t].persName[i].text:"Unknown",ref:e.correspDesc[r][t].persName[i].ref,evidence:"true"===e.correspDesc[r][t].persName[i].conjecture?"conjecture":null,cert:"true"===e.correspDesc[r][t].persName[i].uncertain?"low":null})}),["sender","receiver"].forEach(function(t){for(var s=0;s<e.correspDesc[r][t].placeName.length;s+=1)i[t].push({"#text":e.correspDesc[r][t].placeName[s].text,ref:e.correspDesc[r][t].placeName[s].ref,evidence:"true"===e.correspDesc[r][t].placeName[s].conjecture?"conjecture":null,cert:"true"===e.correspDesc[r][t].placeName[s].uncertain?"low":null})}),t.teiHeader.profileDesc.correspDesc.push({source:"#"+e.getUuid(e.correspDesc[r].bibl),ref:e.correspDesc[r].ref,key:e.correspDesc[r].key,correspAction:[{type:"sent",persName:s.sender,orgName:a.sender,placeName:i.sender,date:{when:"when"===e.correspDesc[r].sender.date?e.correspDesc[r].sender.when:null,from:"span"===e.correspDesc[r].sender.date?e.correspDesc[r].sender.spanFrom:null,to:"span"===e.correspDesc[r].sender.date?e.correspDesc[r].sender.spanTo:null,notBefore:"nba"===e.correspDesc[r].sender.date?e.correspDesc[r].sender.notBefore:null,notAfter:"nba"===e.correspDesc[r].sender.date?e.correspDesc[r].sender.notAfter:null,"#text":e.correspDesc[r].sender.dateAsText,cert:"true"===e.correspDesc[r].sender.dateCert.uncertain?"low":null,evidence:"true"===e.correspDesc[r].sender.dateCert.conjecture?"conjecture":null}},{type:"received",persName:s.receiver,orgName:a.receiver,placeName:i.receiver,date:{when:"when"===e.correspDesc[r].receiver.date?e.correspDesc[r].receiver.when:null,from:"span"===e.correspDesc[r].receiver.date?e.correspDesc[r].receiver.spanFrom:null,to:"span"===e.correspDesc[r].receiver.date?e.correspDesc[r].receiver.spanTo:null,notBefore:"nba"===e.correspDesc[r].receiver.date?e.correspDesc[r].receiver.notBefore:null,notAfter:"nba"===e.correspDesc[r].receiver.date?e.correspDesc[r].receiver.notAfter:null,"#text":e.correspDesc[r].receiver.dateAsText,cert:"true"===e.correspDesc[r].receiver.dateCert.uncertain?"low":null,evidence:"true"===e.correspDesc[r].receiver.dateCert.conjecture?"conjecture":null}}]})}(c);t=this.clear(t),this.downloadLink.json="data:text/json;charset=utf-8,"+encodeURIComponent(p()(t));var u=new XMLHttpRequest;u.open("POST","https://correspSearch.net/api/v1.1/converter/json2xml.xql",!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.onload=function(){200===u.status?e.downloadLink.xml="data:text/xml;charset=utf-8,"+encodeURIComponent(u.responseText):(e.downloadType="json",document.getElementById("downloadAsJSON").disabled=!0)},u.send("json-data="+p()(t)),this.downloadFileName={json:this.meta.title.replace(/ /g,"_")+"-"+i+".json",xml:this.meta.title.replace(/ /g,"_")+"-"+i+".xml"}},clear:function(e){var t=this,r=e;return o()(r).forEach(function(e){r[e[0]]&&"object"===n()(r[e[0]])?(t.clear(r[e[0]]),0===a()(r[e[0]]).length&&delete r[e[0]]):""!==r[e[0]]&&null!==r[e[0]]||delete r[e[0]]}),r},getUuid:function(e){for(var t=0;t<this.bibl.length;t+=1)if(this.bibl[t].id===e)return this.bibl[t].uuid;return 0}},mounted:function(){this.validationResults.meta=this.validate("meta",!0),this.validationResults.bibl=this.validate("bibl",!0),this.validationResults.correspDesc=this.validate("correspDesc",!0),this.prepare()}}},qb6w:function(e,t){},xJD8:function(e,t,r){"use strict";var s=r("8Mze"),a=r("kiOB"),i=r("AfhI"),n=r("kQ+j"),l=r("Z0ZQ");t.a={name:"app",data:function(){return{isInternetExplorer:!1,ieAlert:{de:"Achtung! Microsoft Internet Explorer wird vom CMIF Creator nicht untersttzt.",en:"Attention! Microsoft Internet Explorer is not supported by CMIF Creator."},lang:"de",labels:{start:""},nav:"start",metaState:{title:null,editor:[{name:null,email:null}],publisher:[{name:null,url:null}],url:null,licence:null},biblState:[{type:null,text:null,url:null}],correspDescState:[{urlToXml:null,sender:[{name:null,id:null}],receiver:[{name:null,id:null}],senderPlace:[{name:null,id:null}],receiverPlace:[{name:null,id:null}],senderDate:{when:null,notBefore:null,notAfter:null,from:null,to:null},receiverDate:{when:null,notBefore:null,notAfter:null,from:null,to:null}}],metaData:{title:"",editor:[{name:"",email:""}],publisher:[{name:"",url:""}],url:"",licence:""},biblData:[{id:0,uuid:"",type:null,url:"",text:"",selected:""}],pArrays:{persons:[],places:[]},filter:{type:"name",text:""},correspDescData:[{id:0,visible:!1,header:"",ref:"",refHidden:!0,key:"",bibl:0,sender:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:0,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0},receiver:{persName:[{text:"",ref:"",conjecture:!1,uncertain:!1,unknown:!1,organisation:!1,open:!1,highlighted:0,selected:!1,gnd:{open:!1,highlighted:0,suggestions:[],all:0}}],placeName:[{text:"",ref:"",conjecture:!1,uncertain:!1,open:!1,highlighted:0,selected:!1,geo:{open:!1,highlighted:0,suggestions:[],all:0,parameter:"P"}}],date:"",dateCert:{conjecture:!1,uncertain:!1},when:"",notBefore:"",notAfter:"",spanFrom:"",spanTo:"",dateAsText:"",dateAsTextHidden:!0}}]}},components:{start:s.a,metaData:a.a,biblData:i.a,correspDescData:n.a,save:l.a},methods:{navigate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.nav=e,t&&(this.filter={type:t[0],text:t[1]})},check:function(e,t){var r=new RegExp;switch(e){case"url":return r=new RegExp(/^http(s)?\:\/\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi),r.test(t);case"email":return r=new RegExp(/^[a-zA-Z0-9.!#$%&*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),r.test(t);case"person":return r=new RegExp(/^(http(s)?\:\/\/correspSearch\.net\/unknown?)|^(http(s)?\:\/\/d\-nb\.info\/gnd\/?)|^(http(s)?\:\/\/viaf\.org\/viaf\/?)|^(http(s)?\:\/\/catalogue\.bnf\.fr\/?)|^(http(s)?\:\/\/lccn\.loc\.gov\/?)|^(http(s)?\:\/\/correspSearch\.net\/?)/g),r.test(t);case"place":return r=new RegExp(/^http\:\/\/www\.geonames\.org\/?/g),r.test(t);case"date":r=new RegExp(/^(([0-1][0-9][0-9][0-9])$)|^(([0-1][0-9][0-9][0-9])\-([0][1-9]|[1][0-2])$)|^(([0-1][0-9][0-9][0-9])\-([0][1-9]|[1][0-2])\-([0-9][1-9]|[1-2][0-9]|[3][0-1])$)/g);var s=r.test(t),a=t.split("-");if(void 0!==a[1]&&void 0!==a[2])switch(a[1]){case"01":case"03":case"05":case"07":case"08":case"10":case"12":s=parseInt(a[2],10)<32&&s;break;case"04":case"06":case"09":case"11":s=parseInt(a[2],10)<31&&s;break;case"02":a[0]%4==0&&a[0]%100!=0||a[0]%400==0?a[2]>29&&(s=!1):a[2]>28&&(s=!1)}return s;default:return!1}}},beforeCreate:function(){var e=this,t=new XMLHttpRequest;t.open("GET","static/labels.xml"),t.onload=function(){if(200===t.status){e.lang=window.location.search.match(/\?l\=en/)?"en":"de";for(var r=new DOMParser,s=r.parseFromString(t.responseText,"application/xml"),a=0;a<s.children[0].children.length;a+=1)if(s.children[0].children[a].attributes[0].value===String(e.lang))for(var i=0;i<s.children[0].children[a].children.length;i+=1)e.labels[s.children[0].children[a].children[i].attributes[0].value]=s.children[0].children[a].children[i].innerHTML}else console.error(t.status)},t.send()},mounted:function(){(navigator.userAgent.match(new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"))||navigator.userAgent.match(/Trident.*rv\:11\./))&&(this.isInternetExplorer=!0)}}},"yf/4":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"biblData"},[r("b-container",[r("b-row",[r("b-col",[r("h3",[e._v(e._s(e.label.bibInfo))]),e._v("\n        "+e._s(e.label.step2Desc)+"\n      ")])],1),e._v(" "),r("b-row",{staticClass:"mt-2"},[r("b-col",e._l(e.bibl,function(t,s){return r("b-card",{key:t.id,staticClass:"mb-2"},[e.bibl.length>1?r("b-row",{attrs:{"align-h":"end"}},[r("b-col",{attrs:{cols:"1"}},[r("b-button",{staticClass:"w-100 mb-2",attrs:{size:"sm"},on:{click:function(r){e.rmBiblItem(t.id)}}},[r("i",{staticClass:"fa fa-trash-alt"})])],1)],1):e._e(),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.bibType,"invalid-feedback":e.label.errorBiblType,"label-for":"biblType"}},[r("b-form-select",{attrs:{id:"biblType",state:e.state[s].type},nativeOn:{blur:function(r){e.state[s].type=e.setState(t,"type")}},model:{value:t.type,callback:function(r){e.$set(t,"type",r)},expression:"item.type"}},[r("option",{domProps:{value:null}},[e._v(e._s(e.label.selectBibType))]),e._v(" "),r("option",{attrs:{value:"online"}},[e._v(e._s(e.label.bibTypeOnline))]),e._v(" "),r("option",{attrs:{value:"print"}},[e._v(e._s(e.label.bibTypePrint))]),e._v(" "),r("option",{attrs:{value:"hybrid"}},[e._v(e._s(e.label.bibTypeHybrid))])])],1),e._v(" "),r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.bibTitle,"invalid-feedback":e.label.errorBibl,"label-for":"biblText"}},[r("b-form-textarea",{attrs:{id:"biblText",rows:3,"max-rows":3,state:e.state[s].text},nativeOn:{blur:function(r){e.state[s].text=e.setState(t,"text")}},model:{value:t.text,callback:function(r){e.$set(t,"text",r)},expression:"item.text"}})],1),e._v(" "),"online"===t.type||"hybrid"===t.type?r("b-form-group",{attrs:{horizontal:"","label-cols":2,"label-size":"sm",label:e.label.bibUrl,"invalid-feedback":e.label.errorURLFormat,"label-for":"biblUrl"}},[r("b-form-input",{attrs:{id:"biblUrl",size:"sm",state:e.state[s].url},nativeOn:{blur:function(r){e.state[s].url=e.setState(t,"url")}},model:{value:t.url,callback:function(r){e.$set(t,"url",r)},expression:"item.url"}})],1):e._e()],1)}))],1),e._v(" "),r("b-row",[r("b-col",[r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:e.addBiblItem}},[r("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.label.addBib)+"\n        ")])],1),e._v(" "),r("b-col",[r("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"secondary"},on:{click:function(t){e.$parent.navigate("correspDesc")}}},[e._v("\n          "+e._s(e.label.continue)+"\n        ")])],1)],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};t.a=i},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.js.map